#!/bin/bash
source $HOME/.bin/common
CUSTOM_STATS=$HOME/.cache/i3stats

function tray_reload()
{
    _kill_tray
}

function reload()
{
    _kill_tray "reload"
}

function restart()
{
    _kill_tray "restart"
}

function _kill_tray()
{
    pkill wsw-applet
    if [ ! -z "$1" ]; then
        i3-msg $1
    fi
}

function stats()
{
    local last
    last=""
    i3status | while :
    do
        read line
        d=$(cat $MAIN_STATS)
        if [ -z "$d" ]; then
            d="$last"
        else
            last="$d"
        fi
        echo "$d$line|" || exit 1
    done
}

$1 $2 
