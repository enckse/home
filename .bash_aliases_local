#!/bin/bash
glint() {
    if command -v go &> /dev/null; then
        local f
        goimports -l . | grep -v bindata.go | sed 's/^/[goimports]    /g'
        revive ./... | sed 's/^/[revive]       /g'
        for f in $(find . -type f -name "*.go" -exec dirname {} \; | sort -u); do
            go vet $f | sed 's/^/[govet]        /g'
        done
        golangci-lint run
    fi
}

sys-upgrade() {
    echo "-> update ports"
    sudo port selfupdate
    sudo port upgrade outdated
    echo "-> update rust"
    rustup update
    echo "-> update kitty"
    kitty-updater
    echo "-> cleanup ports"
    sudo port uninstall inactive
    sudo port reclaim
    echo "-> setup defaults"
    if [ "$(which python)" == "/usr/bin/python" ]; then
        sudo port select --set python python39;
    fi
    which pycodestyle 2>&1 || sudo port select --set pycodestyle pycodestyle-py39
    which pydocstyle 2>&1 || sudo port select --set pydocstyle py39-pydocstyle
    which pyflakes 2>&1 || sudo port select --set pyflakes py39-pyflakes
}
