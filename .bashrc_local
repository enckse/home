export GOPATH="$HOME/Library/Caches/go"
export RUSTUP_HOME="$HOME/.rust/rustup"
export CARGO_HOME="$HOME/.rust/cargo"
export PATH="$CARGO_HOME/bin:$HOME/.bin:$GOPATH/bin/:$PATH"
export PATH="/opt/local/libexec/gnubin:/opt/local/bin:/opt/local/sbin:$PATH"
export LOCKBOX_STORE="/Users/enck/Git/passwords"
export LOCKBOX_KEYMODE="macos"
export LOCKBOX_TOTP="keys/totp/"
export DISPLAY=:0

for f in devtools passwords workstations; do
    if [ ! -d ~/Git/$f ]; then
        echo "-> $f not cloned"
    fi
done

for f in /opt/local/share/bash-completion/bash_completion \
         $HOME/.bash_aliases_local \
         $HOME/Git/workstations/bashrc \
         $CARGO_HOME/env \
         $HOME/.bash_aliases; do
    if [ -e $f ]; then
        . $f
    fi
done

if [ -d ~/.completions ]; then
    for f in $(find ~/.completions -type f -name "*.bash"); do
        . $f
    done
fi

for f in Documents Downloads Public; do
    c=$(find ~/$f -mtime +1 -type f | grep -v "\.(localized|DS_Store)" | wc -l)
    if [ $c -gt 0 ]; then
        echo " -> $f [$c]"
    fi
done

gpga
export GPG_TTY=$(tty)
git uncommitted
mailcnt=$(find ~/.mutt/maildir -type f -wholename "*/new/*" | wc -l)
if [ $mailcnt -gt 0 ]; then
    echo
    echo "mail: $mailcnt"
    echo
fi
