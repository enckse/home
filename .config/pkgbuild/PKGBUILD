# Maintainer: Sean Enck <enckse@gmail.com>
pkgname=enckse-install
pkgver=20170924
pkgrel=1
pkgdesc="install settings/setup/etc."
url="https://github.com/enckse/home"
license=('MIT')
arch=("any")
depends=('alsa-utils'
         'arch-install-scripts'
         'base-devel'
         'bash-completion'
         'cbatticon'
         'cifs-utils'
         'compton'
         'devtools'
         'dmenu'
         'epiphyte-build'
         'exfat-utils'
         'firefox'
         'feh'
         'git'
         'i3'
         'i3lock'
         'i3status'
         'gsfonts'
         'keepassx2'
         'lxterminal'
         'noto-fonts'
         'noto-fonts-cjk'
         'noto-fonts-emoji'
         'openssh'
         'p7zip'
         'pass'
         'perl-uri'
         'pwgen'
         'rsync'
         'tree'
         'ttf-arphic-uming'
         'ttf-baekmuk'
         'ttf-freefont'
         'ttf-liberation'
         'unzip'
         'vlc'
         'volumeicon'
         'weechat'
         'wget'
         'wsw'
         'wsw-applet'
         'xautolock'
         'xdotool'
         'xorg'
         'xorg-xdm'
         'xorg-xrandr')
source=("git+$url")
md5sums=("SKIP")

build() {
    echo "blacklist pcspkr" > nobeep.conf
    echo "[Files]
Bind=/opt/shared:/root/workspace
Bind=/opt/shared
Bind=/var/cache/pacman
Bind=/mnt/repositories
BindReadOnly=/root/.gnupg
BindReadOnly=/etc/passwd
BindReadOnly=/etc/shadow
BindReadOnly=/etc/group
BindReadOnly=/etc/gshadow
BindReadOnly=/etc/sudoers
BindReadOnly=/home/enck/.gnupg" > base.template
}

package() {
    install 644 nobeep.conf $pkgdir/etc/modprobe.d/nobeep.conf
    install 644 base.template $pkgdir/etc/systemd/nspawn/base.template
    cd $srcdir/home/
    install 644 .config/firewall/iptables.rules $pkgdir/etc/iptables/iptables.rules
}
