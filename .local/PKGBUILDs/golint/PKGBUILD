pkgname=golint-git
pkgver=2020.183
pkgrel=3
pkgdesc="golang lint"
arch=('x86_64')
license=('BSD 3-Clause')
url="https://github.com/golang/lint"
makedepends=('go' 'git')
depends=('python' 'go-tools')
source=("git://github.com/golang/lint.git" "golinter")
sha256sums=('SKIP' '4a4d6a471ec29147ad4dfa52d63f0f671ca6593ebc783fbb59db8d14e58f4a3d')

pkgver() {
    cd "$srcdir/lint"
    echo $(date +%Y).$(git rev-list --count master)
}

build() {
    export GOBIN="$srcdir/lint/bin/"
    export GOPATH=$GOBIN
    mkdir -p $GOBIN
	cd $srcdir/lint/golint
    go install -v .
}

package() {
    install -Dm755 $srcdir/lint/bin/golint $pkgdir/usr/bin/golint
    install -Dm755 $srcdir/golinter $pkgdir/usr/bin/golinter
}
