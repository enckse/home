pkgname=localetc
pkgver=20201119
pkgrel=4
arch=('x86_64')
license=('MIT')
source=("100-adwaita.hook"
        "100-systemd-boot.hook"
        "100-target-update.hook"
        "etcgitstatus.path"
        "etcgitstatus.service"
        ".gitignore"
        "index.theme"
        "wsw.service"
        "post-commit.git")
md5sums=("SKIP"
         "SKIP"
         "SKIP"
         "SKIP"
         "SKIP"
         "SKIP"
         "SKIP"
         "SKIP"
         "SKIP")
pkgdesc="local machine etc files"

pkgver(){
    echo $(date +%Y%m%d)
}

package() {
    local f
    mkdir -p $pkgdir/etc/pacman.d/hooks
    install -Dm644 .gitignore $pkgdir/etc/
    for f in 100-adwaita.hook 100-systemd-boot.hook 100-target-update.hook index.theme; do
        install -Dm644 $f $pkgdir/etc/pacman.d/hooks/$f
    done
    mkdir -p $pkgdir/skel
    install -Dm755 post-commit.git $pkgdir/skel/
    mkdir -p $pkgdir/usr/lib/systemd/system
    for f in etcgitstatus.path etcgitstatus.service wsw.service; do
        install -Dm644 $f $pkgdir/usr/lib/systemd/system/$f
    done
}
