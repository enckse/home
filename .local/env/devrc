#!/bin/bash

GITCONF=$HOME/.local/var/gitconfig
if [ ! -e $GITCONF ]; then
    ln -sf ~/.local/env/dev.gitconfig $GITCONF
fi

unset SSH_AGENT_PID
if [ "${gnupg_SSH_AUTH_SOCK_by:-0}" -ne $$ ]; then
    export SSH_AUTH_SOCK="$(gpgconf --list-dirs agent-ssh-socket)"
fi

export GPG_TTY=$(tty)
gpg-connect-agent updatestartuptty /bye >/dev/null

source ~/.local/env/dev_aliases
if [ -z "$SSH_CONNECTION" ]; then
    source ~/.local/lib/ide.app load
    source ~/.local/env/dev_x_aliases
fi

if [ ! -z "$SCHROOT_CHROOT_NAME" ]; then
    PS1='[\u@${SCHROOT_CHROOT_NAME} \W]\$ '
fi

if [ -x /usr/bin/xhost ]; then
    if [ ! -z "$DISPLAY" ]; then
        xhost +local: > /dev/null
    fi
fi
