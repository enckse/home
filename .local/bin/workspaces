#!/usr/bin/perl
use strict;
use warnings;

for (`xrandr | grep " connected" | cut -d " " -f 1`) {
    chomp;
    system("xrandr --output $_ --off");
}

system("xrandr --output eDP-1 --mode 2560x1440");
if (@ARGV) {
    my $cmd = shift @ARGV;
    if ( $cmd eq "docked" ) {
        system(
"xrandr --output DP-2-1-8 --right-of eDP-1 --mode 2560x1440 --rotate right"
        );
        system("xrandr --output DP-2-8 --left-of eDP-1 --mode 2560x1440");
    }
}
system("sleep 0.5");
system("brightness middle");
system("sleep 0.5");
for ( ( "dunst", "dwm", "status" ) ) {
    system("pkill $_");
}
